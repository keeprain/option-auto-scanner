name: Daily Market Summary

on:
  schedule:
    # UTC 21:15 = è¥¿é›…å›¾å†¬ä»¤æ—¶ 13:15 / å¤ä»¤æ—¶ 14:15
    # ä¹Ÿå°±æ˜¯æ¯å¤©æ”¶ç›˜åè‡ªåŠ¨å‘ä¸€å°æ±‡æ€»
    - cron: '15 21 * * 1-5'
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨ç‚¹å‡»æµ‹è¯•

jobs:
  summary_job:
    runs-on: ubuntu-latest
    timeout-minutes: 5

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: pip install -r requirements.txt

      - name: Run Summary Report
        env:
          EMAIL_USER: ${{ secrets.EMAIL_USER }}
          EMAIL_PASS: ${{ secrets.EMAIL_PASS }}
          TO_EMAIL: ${{ secrets.TO_EMAIL }}
          # ğŸ”¥ è¿™é‡Œæ˜¯å…³é”®ï¼šå‘Šè¯‰ç¨‹åºç°åœ¨æ˜¯â€œæ±‡æ€»æ¨¡å¼â€ï¼Œæ— è§†é˜ˆå€¼å¼ºåˆ¶å‘é‚®ä»¶
          RUN_MODE: 'SUMMARY'
        run: python main.py
